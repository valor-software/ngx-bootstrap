{"version":3,"file":"modal-container.component.js","sourceRoot":"","sources":["../../src/modal/modal-container.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, ElementRef, HostListener, OnDestroy, OnInit, Renderer } from '@angular/core';\nimport { ClassName, DISMISS_REASONS, ModalOptions, TransitionDurations } from './modal-options.class';\nimport { BsModalService } from './bs-modal.service';\nimport { isBs3 } from '../utils/ng2-bootstrap-config';\n\n\n\nexport class ModalContainerComponent implements OnInit, OnDestroy {\n  public config: ModalOptions;\n  public isShown: boolean = false;\n  public level: number;\n  public isAnimated: boolean;\n  protected _element: ElementRef;\n  private isModalHiding: boolean = false;\n  \n  public onClick(event: any): void {\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || event.target !== this._element.nativeElement) {\n      return;\n    }\n    this.bsModalService.setDismissReason(DISMISS_REASONS.BACKRDOP);\n    this.hide();\n  }\n  \n  public onEsc(): void {\n    if (this.config.keyboard && this.level === this.bsModalService.getModalsCount()) {\n      this.bsModalService.setDismissReason(DISMISS_REASONS.ESC);\n      this.hide();\n    }\n  }\n\n  // @HostListener('window:focusin', ['$event'])\n  // public enforceFocus($event:any): void {\n  //   if (!(this._element.nativeElement === $event.target || this._element.nativeElement.contains($event.target))) {\n  //     this._element.nativeElement.focus();\n  //   }\n  // }\n  // @HostListener('focusout', ['$event'])\n  // public preventFocusOut($event:any): void {\n  //   if (!$event.relatedTarget) {\n  //     this._element.nativeElement.focus();\n  //   }\n  // }\n\n  public constructor(options: ModalOptions, _element: ElementRef, private bsModalService: BsModalService, private _renderer: Renderer) {\n    this._element = _element;\n    this.config = Object.assign({}, options);\n  }\n\n  ngOnInit(): void {\n    if (this.isAnimated) {\n      this._renderer.setElementClass(this._element.nativeElement, ClassName.FADE, true);\n    }\n    this._renderer.setElementStyle(this._element.nativeElement, 'display', 'block');\n    setTimeout(() => {\n      this.isShown = true;\n      this._renderer.setElementClass(this._element.nativeElement, isBs3() ? ClassName.IN : ClassName.SHOW, true);\n    }, this.isAnimated ? TransitionDurations.BACKDROP : 0);\n    if (document && document.body) {\n      if (this.bsModalService.getModalsCount() === 1) {\n        this.bsModalService.checkScrollbar();\n        this.bsModalService.setScrollbar();\n      }\n      this._renderer.setElementClass(document.body, ClassName.OPEN, true);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.isShown) {\n      this.hide();\n    }\n  }\n\n  hide(): void {\n    if (this.isModalHiding || !this.isShown) {\n      return;\n    }\n    this.isModalHiding = true;\n    this._renderer.setElementClass(this._element.nativeElement, isBs3() ? ClassName.IN : ClassName.SHOW, false);\n    setTimeout(() => {\n      this.isShown = false;\n      if (document && document.body && this.bsModalService.getModalsCount() === 1) {\n        this._renderer.setElementClass(document.body, ClassName.OPEN, false);\n      }\n      this.bsModalService.hide(this.level);\n      this.isModalHiding = false;\n    }, this.isAnimated ? TransitionDurations.MODAL : 0);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'modal-container',\n  template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\" role=\"document\">\n      <div class=\"modal-content\"><ng-content></ng-content></div>\n    </div>\n  `,\n  // tslint:disable-next-line\n  host: {\n    class: 'modal',\n    role: 'dialog',\n    tabindex: '-1'\n  }\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ModalOptions, },\n{type: ElementRef, },\n{type: BsModalService, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'onClick': [{ type: HostListener, args: ['click', ['$event'], ] },],\n'onEsc': [{ type: HostListener, args: ['window:keydown.esc', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}